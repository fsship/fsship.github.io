!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="builds/",e(0)}([function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=n(1);n(10);var s=function(){function t(){var e=this;o(this,t),this.stageElement=document.querySelector(".gameBox"),this.currentTool="",this.staticInfo={},this.blockList=[],this.stageElement.addEventListener("click",function(t){var n=e.positionToGrid(t.clientX-e.stageElement.offsetLeft,t.clientY-e.stageElement.offsetTop);"eraser"!=e.currentTool?e.addBlock(e.currentTool,n):e.removeBlock(n)},!1),this.toolBoxElement=document.querySelector(".toolBox"),this.toolBoxElement.addEventListener("click",function(t){e.setCurrentTool(t.target.dataset.tool)}),this.setCurrentTool("fixed"),document.getElementById("download").addEventListener("click",function(){e.downloadLevel()}),document.getElementById("test").addEventListener("click",function(){var t=window.open("./index.html","_blank");window.addEventListener("message",function(){t.postMessage(e.generateLevel(),document.origin)})})}return i(t,[{key:"addBlock",value:function(t,e){this.findBlock(e)&&this.removeBlock(e);var n=(0,r.blockGenerator)(t,e);this.staticInfo[n.constructor.name]?this.staticInfo[n.constructor.name]++:this.staticInfo[n.constructor.name]=1,this.blockList.push(n)}},{key:"findBlock",value:function(t){for(var e=0;e<this.blockList.length;e++)if(this.blockList[e].x==t.x&&this.blockList[e].y==t.y)return{index:e,block:this.blockList[e]};return null}},{key:"removeBlock",value:function(t){var e=this.findBlock(t);e&&(e.block.element.remove(),this.staticInfo[e.block.constructor.name]--,this.blockList.splice(e.index,1))}},{key:"setCurrentTool",value:function(t){var e=document.querySelectorAll(".toolBox > div");(new Array).forEach.call(e,function(t){t.classList.remove("active")}),this.currentTool=t,document.querySelector("[data-tool='"+t+"']").classList.add("active")}},{key:"positionToGrid",value:function(t,e){var n={x:parseInt(t/50),y:parseInt(e/50)};return n}},{key:"generateLevel",value:function(){for(var t={blockList:[],targetList:[],prev:null,next:null},e=0;e<this.blockList.length;e++)this.blockList[e]instanceof r.Player?t.playerPosition={x:this.blockList[e].x,y:this.blockList[e].y}:this.blockList[e]instanceof r.Target?t.targetList.push({x:this.blockList[e].x,y:this.blockList[e].y}):t.blockList.push({blockType:this.blockList[e]instanceof r.FixedBlock?"fixed":"box",position:{x:this.blockList[e].x,y:this.blockList[e].y}});return t}},{key:"downloadLevel",value:function(){var t=this.generateLevel(),e=new Blob([JSON.stringify(t)],{type:"application/json"}),n=document.createElement("a");n.href=URL.createObjectURL(e),n.download="level.json",n.click()}}]),t}();new s},function(t,e,n){"use strict";function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){switch(t){case"player":return new h(e);case"box":return new d(e);case"fixed":return new u(e);case"target":return new a(e);default:return null}}Object.defineProperty(e,"__esModule",{value:!0}),e.Box=e.Player=e.MoveableBlock=e.FixedBlock=e.Target=void 0;var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();e.blockGenerator=s,n(2);var l=function(){function t(e){r(this,t),this.x=e.x,this.y=e.y,this.element=document.createElement("div"),document.getElementById("g").appendChild(this.element),this.element.classList.add("block"),this.setElementPosition()}return c(t,[{key:"setElementPosition",value:function(){this.element.style.left=50*this.x+"px",this.element.style.top=50*this.y+"px"}}]),t}();e["default"]=l;var a=e.Target=function(t){function e(t){r(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n.element.classList.add("target"),n}return i(e,t),e}(l),u=e.FixedBlock=function(t){function e(t){r(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n.element.classList.add("brickBlock"),n.moveable=!1,n}return i(e,t),e}(l),f=e.MoveableBlock=function(t){function e(t){r(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n.element.classList.add("moveableBlock"),n.moveable=!0,n}return i(e,t),c(e,[{key:"move",value:function(t){switch(t){case"up":this.y>0&&this.y--;break;case"down":this.y<9&&this.y++;break;case"left":this.x>0&&this.x--;break;case"right":this.x<19&&this.x++}this.setElementPosition()}}]),e}(l),h=e.Player=function(t){function e(t){r(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n.element.classList.add("player"),n}return i(e,t),c(e,[{key:"resetPosition",value:function(t){this.x=t.x,this.y=t.y,this.setElementPosition()}}]),e}(f),d=e.Box=function(t){function e(t){r(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t));return n.element.classList.add("box"),n}return i(e,t),e}(f)},function(t,e){},,,,,,,,function(t,e){}]);